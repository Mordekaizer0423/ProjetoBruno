<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>BNeural - Sistema de GestÃ£o</title>
  <link rel="stylesheet" href="style.css">
  <link rel="manifest" href="manifest.json">
  <meta name="theme-color" content="#f4c542">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <link rel="apple-touch-icon" href="icon-192.png">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
  <header>
    <div class="header-content">
      <h1>BNeural - Sistema de GestÃ£o Empresarial</h1>
      <div class="header-controls">
        <button id="themeToggle" class="theme-btn">ğŸŒ™</button>
        <button id="installBtn" class="install-btn" style="display: none;">ğŸ“± Instalar App</button>
      </div>
    </div>
  </header>

  <nav class="menu">
    <button onclick="mostrarPainel('orcamento')" class="menu-btn active" data-panel="orcamento">
      ğŸ“‹ Novo OrÃ§amento
    </button>
    <button onclick="mostrarPainel('dashboard')" class="menu-btn" data-panel="dashboard">
      ğŸ“Š Dashboard
    </button>
    <button onclick="mostrarPainel('caixa')" class="menu-btn" data-panel="caixa">
      ğŸ’° Controle de Caixa
    </button>
    <button onclick="mostrarPainel('contas')" class="menu-btn" data-panel="contas">
      ğŸ“… Contas Fixas
    </button>
    <button onclick="mostrarPainel('config')" class="menu-btn" data-panel="config">
      âš™ï¸ ConfiguraÃ§Ãµes
    </button>
    <button onclick="mostrarPainel('relatorios')" class="menu-btn" data-panel="relatorios">
      ğŸ“„ RelatÃ³rios
    </button>
    <button onclick="mostrarPainel('historico-pdfs')" class="menu-btn" data-panel="historico-pdfs">
      ğŸ–¨ï¸ HistÃ³rico de PDFs
    </button>
  </nav>

  <main>
    <!-- Painel OrÃ§amento -->
    <section id="orcamento" class="painel active">
      <h2>Novo OrÃ§amento</h2>
      <form id="formOrcamento">
        <input type="text" placeholder="Nome do Cliente" name="cliente" required>
        <input type="text" placeholder="Empresa do Cliente" name="empresa">
        <input type="tel" placeholder="Telefone (com DDD)" name="telefone" required>
        
        <div id="itensOrcamento">
          <div class="item-orcamento">
            <h3>Item 1</h3>
            
            <!-- Seletor de Produto PrÃ©-fixado -->
            <div class="produto-selector">
              <select data-item="0" onchange="selecionarProduto(0)">
                <option value="">Selecionar produto prÃ©-fixado (opcional)</option>
              </select>
              <button type="button" onclick="limparItem(0)" class="btn-secondary">ğŸ—‘ï¸ Limpar</button>
            </div>
            
            <input type="text" placeholder="DescriÃ§Ã£o do ServiÃ§o" name="descricao_0" required>
            <div class="medidas">
              <input type="number" placeholder="Largura (m)" step="0.01" name="largura_0">
              <input type="number" placeholder="Altura (m)" step="0.01" name="altura_0">
            </div>
            <input type="number" placeholder="Valor UnitÃ¡rio (R$)" step="0.01" name="valor_unitario_0" required>
            <input type="number" placeholder="Quantidade" name="quantidade_0" value="1" min="1">
            <button type="button" onclick="removerItem(0)" class="btn-remover" style="display: none;">âŒ Remover</button>
          </div>
        </div>
        
        <button type="button" onclick="adicionarItem()" class="btn-adicionar">â• Adicionar Item</button>
        
        <div class="total-orcamento">
          <strong>Total: R$ <span id="totalOrcamento">0,00</span></strong>
        </div>

        <!-- Campos Extras do OrÃ§amento -->
        <div class="orcamento-extras">
          <h3>InformaÃ§Ãµes Adicionais</h3>
          <div class="extras-grid">
            <div>
              <label>Prazo de Entrega:</label>
              <input type="text" placeholder="Ex: 7 dias Ãºteis" name="prazo_entrega" required>
            </div>
            <div>
              <label>Forma de Pagamento:</label>
              <select name="forma_pagamento" required>
                <option value="">Selecione...</option>
                <option value="dinheiro">Dinheiro</option>
                <option value="cartao_credito">CartÃ£o de CrÃ©dito</option>
                <option value="cartao_debito">CartÃ£o de DÃ©bito</option>
                <option value="pix">PIX</option>
                <option value="a_combinar">A Combinar</option>
                <option value="boleto">Boleto</option>
              </select>
            </div>
            <div>
              <label>Garantia (em meses):</label>
              <input type="number" placeholder="Ex: 12" name="garantia_meses" min="0">
            </div>
            <div>
              <label>Nome do Vendedor:</label>
              <input type="text" placeholder="Ex: JoÃ£o Silva" name="nome_vendedor">
            </div>
          </div>
        </div>

        <div class="botoes">
          <button type="button" onclick="gerarPDF()" class="btn-primary">ğŸ“„ Gerar PDF</button>
          <button type="button" onclick="enviarWhatsApp()" class="btn-success">ğŸ“± Enviar WhatsApp</button>
          <button type="button" onclick="lancarCaixa()" class="btn-info">ğŸ’° LanÃ§ar no Caixa</button>
        </div>
      </form>
    </section>

    <!-- Painel Dashboard -->
    <section id="dashboard" class="painel">
      <h2>Dashboard Financeiro</h2>
      <div class="dashboard-cards">
        <div class="card">
          <h3>Saldo Atual</h3>
          <p id="saldoAtual" class="valor-grande">R$ 0,00</p>
        </div>
        <div class="card">
          <h3>Entradas do MÃªs</h3>
          <p id="entradasMes" class="valor-grande">R$ 0,00</p>
        </div>
        <div class="card">
          <h3>PendÃªncias</h3>
          <p id="pendenciasMes" class="valor-grande">R$ 0,00</p>
        </div>
      </div>
      <div class="grafico-container">
        <canvas id="graficoFinanceiro"></canvas>
      </div>
    </section>

    <!-- Painel Caixa -->
    <section id="caixa" class="painel">
      <h2>Controle de Caixa</h2>
      
      <div class="caixa-actions">
        <button onclick="mostrarFormEntrada()" class="btn-success">â• Nova Entrada</button>
        <button onclick="mostrarFormSaida()" class="btn-danger">â– Nova SaÃ­da</button>
      </div>

      <div id="formEntrada" class="form-modal" style="display: none;">
        <div class="modal-content">
          <h3>Nova Entrada</h3>
          <input type="text" id="descricaoEntrada" placeholder="DescriÃ§Ã£o">
          <input type="number" id="valorEntrada" placeholder="Valor (R$)" step="0.01">
          <input type="date" id="dataEntrada">
          <div class="modal-buttons">
            <button onclick="adicionarEntrada()" class="btn-success">Salvar</button>
            <button onclick="fecharModal()" class="btn-secondary">Cancelar</button>
          </div>
        </div>
      </div>

      <div id="formSaida" class="form-modal" style="display: none;">
        <div class="modal-content">
          <h3>Nova SaÃ­da</h3>
          <input type="text" id="descricaoSaida" placeholder="DescriÃ§Ã£o">
          <input type="number" id="valorSaida" placeholder="Valor (R$)" step="0.01">
          <input type="date" id="dataSaida">
          <div class="modal-buttons">
            <button onclick="adicionarSaida()" class="btn-danger">Salvar</button>
            <button onclick="fecharModal()" class="btn-secondary">Cancelar</button>
          </div>
        </div>
      </div>

      <div class="historico-caixa">
        <h3>HistÃ³rico de MovimentaÃ§Ãµes</h3>
        <div id="listaCaixa"></div>
      </div>
    </section>

    <!-- Painel Contas Fixas -->
    <section id="contas" class="painel">
      <h2>Contas Fixas e Agendamentos</h2>
      
      <button onclick="mostrarFormConta()" class="btn-primary">â• Nova Conta Fixa</button>
      
      <div id="formConta" class="form-modal" style="display: none;">
        <div class="modal-content">
          <h3>Nova Conta Fixa</h3>
          <input type="text" id="descricaoConta" placeholder="DescriÃ§Ã£o (ex: Aluguel)">
          <input type="number" id="valorConta" placeholder="Valor (R$)" step="0.01">
          <input type="number" id="diaConta" placeholder="Dia do vencimento (1-31)" min="1" max="31">
          <select id="tipoConta">
            <option value="saida">Conta a Pagar</option>
            <option value="entrada">Conta a Receber</option>
          </select>
          <div class="modal-buttons">
            <button onclick="adicionarConta()" class="btn-success">Salvar</button>
            <button onclick="fecharModal()" class="btn-secondary">Cancelar</button>
          </div>
        </div>
      </div>

      <div class="contas-lista">
        <h3>Contas Cadastradas</h3>
        <div id="listaContas"></div>
      </div>

      <div class="pendencias">
        <h3>PendÃªncias</h3>
        <div id="listaPendencias"></div>
      </div>
    </section>

    <!-- Painel ConfiguraÃ§Ãµes -->
    <section id="config" class="painel">
      <div class="config-box">
        <h2>ConfiguraÃ§Ãµes da Empresa</h2>
        
        <!-- Abas de ConfiguraÃ§Ãµes -->
        <div class="config-tabs">
          <button type="button" onclick="mostrarAbaConfig('empresa')" class="tab-btn active" data-tab="empresa">ğŸ¢ Dados da Empresa</button>
          <button type="button" onclick="mostrarAbaConfig('produtos')" class="tab-btn" data-tab="produtos">ğŸ“¦ Produtos PrÃ©-fixados</button>
        </div>

        <!-- Aba Dados da Empresa -->
        <div id="abaEmpresa" class="config-tab active">
          <form id="formConfig">
            <label>Nome Fantasia:</label>
            <input type="text" name="nome_fantasia" required>
            
            <label>CNPJ:</label>
            <input type="text" name="cnpj" required>
            
            <label>RegiÃ£o:</label>
            <input type="text" name="regiao">
            
            <label>EndereÃ§o (Opcional):</label>
            <input type="text" name="endereco">
            
            <label>Slogan:</label>
            <input type="text" name="slogan" placeholder="Ex: Qualidade e ConfianÃ§a">
            
            <label>Logo da Empresa (JPG):</label>
            <input type="file" name="logo" accept="image/jpeg,image/png" id="logoInput">
            <div id="logoPreview"></div>
            
            <label>Link da Pasta Google Drive:</label>
            <input type="text" name="google_drive">
            
            <button type="submit" class="btn-primary">ğŸ’¾ Salvar ConfiguraÃ§Ãµes</button>
          </form>
        </div>

        <!-- Aba Produtos PrÃ©-fixados -->
        <div id="abaProdutos" class="config-tab">
          <h3>Cadastro de Produtos PrÃ©-fixados</h3>
          <p>Cadastre produtos para facilitar a criaÃ§Ã£o de orÃ§amentos</p>
          
          <button onclick="mostrarFormProduto()" class="btn-success">â• Novo Produto</button>
          
          <div id="formProduto" class="form-modal" style="display: none;">
            <div class="modal-content">
              <h3>Novo Produto</h3>
              <input type="text" id="nomeProduto" placeholder="Nome do Produto (ex: Lona)">
              <input type="number" id="valorProduto" placeholder="Valor (R$)" step="0.01">
              <select id="tipoProduto">
                <option value="unitario">Valor UnitÃ¡rio</option>
                <option value="metro_quadrado">Metro Quadrado</option>
              </select>
              <div class="modal-buttons">
                <button onclick="adicionarProduto()" class="btn-success">Salvar</button>
                <button onclick="fecharModal()" class="btn-secondary">Cancelar</button>
              </div>
            </div>
          </div>

          <div class="produtos-lista">
            <div id="listaProdutos"></div>
          </div>
        </div>
      </div>
    </section>

    <!-- Painel de RelatÃ³rios -->
    <section id="relatorios" class="painel">
      <h2>RelatÃ³rios e Backup</h2>
      
      <div class="relatorio-actions">
        <div class="periodo-relatorio">
          <label>PerÃ­odo:</label>
          <input type="date" id="dataInicio">
          <input type="date" id="dataFim">
          <button onclick="gerarRelatorio()" class="btn-primary">ğŸ“Š Gerar RelatÃ³rio</button>
        </div>
      </div>

      <div class="backup-info">
        <h3>Backup AutomÃ¡tico</h3>
        <p>RelatÃ³rio mensal serÃ¡ gerado automaticamente todo dia 30/31 de cada mÃªs.</p>
        <p>PDFs e dados serÃ£o enviados para a pasta do Google Drive configurada.</p>
        <button onclick="fazerBackupManual()" class="btn-info">â˜ï¸ Backup Manual</button>
      </div>

      <div id="relatorioResultado"></div>
    </section>

    <!-- Painel HistÃ³rico de PDFs -->
    <section id="historico-pdfs" class="painel">
      <h2>HistÃ³rico de PDFs Gerados</h2>
      <div id="listaHistoricoPdfs"></div>
    </section>
  </main>

  <footer class="pdf-footer-small">
    by BNeural - sistema de gestÃ£o empresarial 
    <a href="tel:+5562985121404">ğŸ“± (62) 98512-1404</a>
  </footer>

  <script src="script.js"></script>
</body>
</html>

